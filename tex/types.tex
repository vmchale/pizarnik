\documentclass{article}

\usepackage{hyperref}
\usepackage{mathpartir}
\usepackage{amsmath}

\begin{document}

\title{Typing Judgments for Stack-Based Concatenative Languages}
\author {V. E. McHale}
\maketitle

\section{Judgments I}

Lowercase Greek letters are type variables; uppercase letters are stack variables. $\Gamma$ is a context. Lowercase Latin letters are terms.
% dalet

A stack variable $A$ is a sequence of type variables $\alpha_1,\alpha_2,\ldots,\alpha_n$ of undetermined length.

\newcommand{\braces}[1]{\{~ #1 ~\}}
\newcommand{\Judge}{\Gamma\vdash}
\newcommand{\with}{~\&~}
\newcommand{\tseq}[2]{#1_1#1_2\cdots#1_#2}

\begin{mathpar}
\inferrule
    {\Gamma \vdash x : A -- B~C \\ \Gamma \vdash y : C -- D}
    {\Gamma \vdash xy : A -- B~D }
    \quad(\textsc {Cat})

\inferrule
{\Gamma \vdash x : A -- B}
{\Gamma \vdash x : C~A -- C~B}
\quad(\textsc{Generalize})

\inferrule
{\Gamma \vdash x : A -- B}
{\Gamma \vdash [x] : -- [A -- B]}
\quad(\textsc{Quote})

\inferrule
{\\}
{\Gamma \vdash \textrm{apply} : A~[A -- B] -- B}
\quad(\textsc{Apply})

\end{mathpar}

This is not algorithmic typing; one could go awry by applying $(\textsc{Generalize})$ spuriously.

% stack variable is always leftmost (hence inconvenient ordering of apply)

% unlike most general unifier, we wish to have the most specific disjuctive type

\section{Judgments II}

% { 0⁻¹ `true & _ `false }
% type rewriting/expansion rules... Int + a = a for a universal, inv
% insight: wildcard is drop
% inverse of a type: swap left/right on stack

% negation of types (constructive)
% inspired by linear logic?

\begin{mathpar}

  \inferrule
  {\Judge x : -- \alpha}
  {\Judge x : \alpha^\bot --}
  \quad(\textsc{Inv})

  \inferrule
  {\Judge x : -- \alpha}
  {\Judge x : -- \alpha \oplus \beta}
  \quad(\textsc{Disjunction})
  % cut? modus ponens

\inferrule
{\Judge \vdash x_1 : \alpha_1 -- A \\ \Judge x_2 : \alpha_2 -- A \\ \cdots \\ \Judge x_n : \alpha_n -- A}
{\Gamma \vdash \braces{x_1 \with x_2 \with \cdots \with x_n} : \alpha_1\oplus\alpha_2\cdots\oplus\alpha_n -- A}
\quad(\textsc{Pattern-Match})

\end{mathpar}

\section{Unification}

% "right permeable" girard uses

% stack variables must only at leftmost (check programmer-supplied function definitions)
% unlike Diggins, we also want monomorphization, hence mgu, match approach
% http://lambda-the-ultimate.org/node/4394#comment-68007

\end{document}
